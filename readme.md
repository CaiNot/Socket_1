# Socket

[TOC]

## Bugs

---

- [ ] **表示未完成**
- [x] **表示已完成**

---

- [x] 1. 输出信息乱码
- [x] 2. 图片发送失败（过早就判断文件结束）
- [x] 3. 多线程退出不合理
- [x] 4. 多线程join出错导致死锁

## bug原因

1. 请求的信息发送过来的时候含有多个`\`导致输出按照`gbk`的输出失败。
2. 文件未按照**二进制**的格式打开，导致判断文件结束时发生错误。
3. C++中线程`delete`之前应当`join`，直接`delete`将导致出错。
4. 多个线程相互`join`容易导致死锁。

## 现已完成的功能

- [ ] 可配置Web服务器的监听地址、监听端口和虚拟路径。
- [x] 能够单线程处理一个请求。当一个客户（浏览器,输入URL：`http://127.0.0.1/index.html` ） 连接时创建一个连接套接字；
- [x] 从连接套接字接收http请求报文，并根据请求报文的确定用户请求的网页文件；
- [x] 从服务器的文件系统获得请求的文件。 创建一个由请求的文件组成的http响应报文。（报文包含状态行+实体体）。
- [x] 经TCP连接向请求的浏览器发送响应，浏览器可以正确显示网页的内容；
- [ ] 服务可以启动和关闭。
- [x] 支持多线程，能够针对每一个新的请求创建新的线程，每个客户请求启动一个线程为该客户服务；
- [x] 在服务器端的屏幕上输出每一个请求的来源（IP地址、端口号和HTTP请求命令行）
- [x] 支持一定的异常情况处理能力。
- [x] 能够传输包含多媒体（如图片）的网页给客户端，并能在客户端正确显示；
- [x] 对于无法成功定位文件的请求，根据错误原因，作相应错误提示。
- [x] 在服务器端的屏幕上能够输出对每一个请求处理的结果。
- [ ] 具备完成所需功能的基本图形用户界面（GUI），并具友好性